<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>EDS 217: Python for Environmental Data Science - EDS 217 - Python for Environmental Data Science</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">

<link rel="stylesheet" href="styles/activities.css">
</head>

<body class="floating">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#python-for-environmental-data-science" id="toc-python-for-environmental-data-science" class="nav-link active" data-scroll-target="#python-for-environmental-data-science">Python for Environmental Data Science</a>
  <ul class="collapse">
  <li><a href="#learning-goals" id="toc-learning-goals" class="nav-link" data-scroll-target="#learning-goals">Learning Goals</a></li>
  </ul></li>
  <li><a href="#course-activities" id="toc-course-activities" class="nav-link" data-scroll-target="#course-activities">Course Activities</a>
  <ul class="collapse">
  <li><a href="#lectures" id="toc-lectures" class="nav-link" data-scroll-target="#lectures">Lectures</a></li>
  <li><a href="#interactive-sessions" id="toc-interactive-sessions" class="nav-link" data-scroll-target="#interactive-sessions">Interactive Sessions</a></li>
  <li><a href="#practice-sessions" id="toc-practice-sessions" class="nav-link" data-scroll-target="#practice-sessions">Practice Sessions</a></li>
  <li><a href="#trypy-sessions" id="toc-trypy-sessions" class="nav-link" data-scroll-target="#trypy-sessions">TryPy Sessions</a></li>
  <li><a href="#group-work" id="toc-group-work" class="nav-link" data-scroll-target="#group-work">Group Work</a></li>
  <li><a href="#course-outline" id="toc-course-outline" class="nav-link" data-scroll-target="#course-outline">Course Outline</a>
  <ul class="collapse">
  <li><a href="#tuesday-september-5" id="toc-tuesday-september-5" class="nav-link" data-scroll-target="#tuesday-september-5">Tuesday, September 5</a></li>
  <li><a href="#wednesday-september-6" id="toc-wednesday-september-6" class="nav-link" data-scroll-target="#wednesday-september-6">Wednesday, September 6</a></li>
  <li><a href="#thursday-september-7" id="toc-thursday-september-7" class="nav-link" data-scroll-target="#thursday-september-7">Thursday, September 7</a></li>
  <li><a href="#friday-september-8" id="toc-friday-september-8" class="nav-link" data-scroll-target="#friday-september-8">Friday, September 8</a></li>
  <li><a href="#monday-september-11" id="toc-monday-september-11" class="nav-link" data-scroll-target="#monday-september-11">Monday, September 11</a></li>
  <li><a href="#tuesday-september-12" id="toc-tuesday-september-12" class="nav-link" data-scroll-target="#tuesday-september-12">Tuesday, September 12</a></li>
  <li><a href="#wednesday-september-13---friday-september-15" id="toc-wednesday-september-13---friday-september-15" class="nav-link" data-scroll-target="#wednesday-september-13---friday-september-15">Wednesday September 13 - Friday, September 15</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">
<hr>
<h4 class="anchored"> <a href="./">Return to Course Home Page</a></h4>
<hr>

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">EDS 217 - Python for Environmental Data Science</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="python-for-environmental-data-science" class="level1">
<h1>Python for Environmental Data Science</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/07fea56b-1-code_screen.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">code_screen.jpg</figcaption>
</figure>
</div>
<p>These class provides an introduction to the Python programming language, the major libraries associated with the python data science stack, and opportunities to explore applications of python to environmental data science via analysis of datasets.</p>
<p>The module assumes no prior experience with python or jupyter notebooks.</p>
<section id="learning-goals" class="level2">
<h2 class="anchored" data-anchor-id="learning-goals">Learning Goals</h2>
<p>(what you will be able to do) - Setup a python environment for data science using <code>conda</code>. - Conduct reproducible analyses within interactive <code>jupyter</code> notebook environments - Use the <code>VSCode</code> IDE to write and execute python notebooks as well as scripts. - Read and write basic-to-intermediate scripts and programs in the Python programming language - Perform analyses on structured data using <code>numpy</code> - Load, explore, aggregate, analyze, and display data using <code>pandas</code>. - Learn to visualize data using <code>matplotlib</code> and friends. - Use <code>scipy</code> functions to develop fits of distributions to empirical data - Apply all of these tools to analyze environmental datasets - Develop a short tutorial on how to use a python data science library for environmental analysis <span class="math inline">^*</span></p>
<p><span class="math inline">^*</span> Final group presentation</p>
</section>
</section>
<section id="course-activities" class="level1">
<h1>Course Activities</h1>
<p>Our time together will be spent in a combination of lecture, interactive sessions, excercises, and group work.</p>
<section id="lectures" class="level2">
<h2 class="anchored" data-anchor-id="lectures">Lectures</h2>
<p><a href="./lectures/lectures.html">Lectures</a> will be used to introduce general concepts and principles of the python language. We won’t have too many of these, but they will be used to introduce new concepts and provide context for the interactive sessions.</p>
</section>
<section id="interactive-sessions" class="level2">
<h2 class="anchored" data-anchor-id="interactive-sessions">Interactive Sessions</h2>
<p><a href="./interactive_sessions/interactive_sessions.html">Interactive sessions</a> will be used to demonstrate the use of python syntax, libraries, and other tools essential to the environmental data science workflow. These sessions will generally be conducted in jupyter notebooks, and will be available for you to download and use as a reference. We will also use these sessions to work through example code and computations related to the major course topics.</p>
</section>
<section id="practice-sessions" class="level2">
<h2 class="anchored" data-anchor-id="practice-sessions">Practice Sessions</h2>
<p><a href="practice_sessions/practice_sessions.ipynb">Practice sessions</a> will be used to provide opportunities to using the concepts, tools, and libraries presented during interactive sessions to solve more open-ended programming problems. While the goal is to develop independent confidence in python programming, we will work through these problems in paired/collaborative coding. Example solutions to these practice problems will always be available.</p>
</section>
<section id="trypy-sessions" class="level2">
<h2 class="anchored" data-anchor-id="trypy-sessions">TryPy Sessions</h2>
<p><a href="./trypy/TryPy.html">TryPy sessions</a> are designed to allow you to develop your own reproducible workflows based on core data science principles. We will often structure these sessions in a similar way to prior activities from <code>EDS221</code>. This will allow you to get a better understanding of the differences between <code>python</code> and <code>R</code> as well as the strengths and weaknesses of each.</p>
</section>
<section id="group-work" class="level2">
<h2 class="anchored" data-anchor-id="group-work">Group Work</h2>
<p>Your <a href="group_project/Python_Data_Science_Show_and_Tell.ipynb">group project</a> is a “Data Science Show-and-Tell” that will extend the skills you develop during the first week of the course through the creation of collaborative presentations focused on datasets and libraries of your choosing. Working in teams, you will develop a short, reproducible tutorial on how to use a python data science library with examples using datasets relevant to environmental analysis. These tutorials will be presented to the class during the final week of the course and shared with the class via a github repository.</p>
</section>
<section id="course-outline" class="level2">
<h2 class="anchored" data-anchor-id="course-outline">Course Outline</h2>
<section id="tuesday-september-5" class="level3">
<h3 class="anchored" data-anchor-id="tuesday-september-5">Tuesday, September 5</h3>
<section id="day0---ready-set-python" class="level4">
<h4 class="anchored" data-anchor-id="day0---ready-set-python"><code>Day[0]</code> - Ready, Set, Python!</h4>
<p>The materials for our first day are designed to introduce the basics of working with Python and getting your local machines setup for the course.</p>
</section>
<section id="morning-session" class="level4">
<h4 class="anchored" data-anchor-id="morning-session">Morning Session</h4>
<p><a href="./lectures/00_Intro_to_Python_Slides.html">Intro to Python Data Science</a></p>
<p><a href="./interactive_sessions/0-1_ready_set_python.html">Interactive Session 0-1 - Ready, set, python</a></p>
</section>
<section id="afternoon-session" class="level4">
<h4 class="anchored" data-anchor-id="afternoon-session">Afternoon Session</h4>
<p><a href="./interactive_sessions/0-2_HelloWorld.html">Interactive Session 0-2 - Hello World</a></p>
<p><a href="./interactive_sessions/0-3_hello_data_science.html">Interactive Session 0-3 - Hello, Python Data Science</a></p>
</section>
</section>
<section id="wednesday-september-6" class="level3">
<h3 class="anchored" data-anchor-id="wednesday-september-6">Wednesday, September 6</h3>
<section id="day1---do-you-speak-python" class="level4">
<h4 class="anchored" data-anchor-id="day1---do-you-speak-python"><code>Day[1]</code> - Do you speak Python?</h4>
<p>On our second day, we will explore variables and learn the fundamentals of controlling the flow of programs in python. We will also learn how to use python to work with structured data.</p>
</section>
<section id="morning-session-1" class="level4">
<h4 class="anchored" data-anchor-id="morning-session-1">Morning Session</h4>
<p><a href="./lectures/02_HelpGPT.html">Getting Help</a></p>
<p><a href="./interactive_sessions/1-1_Variables.html">Interactive Session 1-1 - Variables &amp; Operators</a></p>
<p><a href="practice_sessions/Practice1-1_Variables.ipynb">Practice Session 1-1 - Variables &amp; Operators</a></p>
<p><a href="./interactive_sessions/1-2_Lists.html">Interactive Session 1-2 - Lists and Indexing</a></p>
<p><a href="practice_sessions/Practice1-2_Lists.ipynb">Practice Session 1-2 - Lists and Indexing</a></p>
</section>
<section id="afternoon-session-1" class="level4">
<h4 class="anchored" data-anchor-id="afternoon-session-1">Afternoon Session</h4>
<p><a href="./interactive_sessions/1-3_ControlFlowStatements.html">Interactive Session 1-3 - <code>If</code>s or <code>Else</code>s</a></p>
<p><a href="practice_sessions/Practice1-3_ControlFlowStatements.ipynb">Practice Session 03 - <code>If</code>s or <code>Else</code>s</a></p>
<p><a href="./interactive_sessions/1-4_Structured_Data.html">Interactive Session 1-4 - Structured Data</a></p>
<p><a href="practice_sessions/Practice1-4_StructuredData.ipynb">Practice Session 04 - Structured Data</a></p>
</section>
</section>
<section id="thursday-september-7" class="level3">
<h3 class="anchored" data-anchor-id="thursday-september-7">Thursday, September 7</h3>
<section id="day2---numpy-hooray-for-arrays" class="level4">
<h4 class="anchored" data-anchor-id="day2---numpy-hooray-for-arrays"><code>Day[2]</code> - Numpy 🧮 (Hooray for Arrays!)</h4>
</section>
<section id="morning-session-2" class="level4">
<h4 class="anchored" data-anchor-id="morning-session-2">Morning Session</h4>
<p><a href="./lectures/01_The_Zen_of_Python.html">The Zen of Python</a></p>
<p>Our journey into Python’s Data Science toolkit begins with NumPy, a library designed to perform advanced calculations on matrices.</p>
<p><a href="./exercises/Exercise2-1_Numpy.html">Session 2-1 - NumPy</a></p>
</section>
<section id="afternoon-session-2" class="level4">
<h4 class="anchored" data-anchor-id="afternoon-session-2">Afternoon Session</h4>
<p><a href="./trypy/00_trypy_stl_blood/stl_blood_exercise.html">TryPy 00 - St.&nbsp;Louis Lead Data</a></p>
</section>
</section>
<section id="friday-september-8" class="level3">
<h3 class="anchored" data-anchor-id="friday-september-8">Friday, September 8</h3>
<section id="day3---pandas" class="level4">
<h4 class="anchored" data-anchor-id="day3---pandas"><code>Day[3]</code> - Pandas 🐼</h4>
<p>We end our first week with arguably the most important library in the Python data science ecosystem: <code>pandas</code>.</p>
</section>
<section id="morning-session-3" class="level4">
<h4 class="anchored" data-anchor-id="morning-session-3">Morning Session</h4>
<p><a href="./exercises/Exercise2-2_Pandas.html">Session 3-1 - Pandas</a></p>
</section>
<section id="afternoon-session-3" class="level4">
<h4 class="anchored" data-anchor-id="afternoon-session-3">Afternoon Session</h4>
<p>TryPy 01</p>
</section>
</section>
<section id="monday-september-11" class="level3">
<h3 class="anchored" data-anchor-id="monday-september-11">Monday, September 11</h3>
<section id="day4---matplotlib" class="level4">
<h4 class="anchored" data-anchor-id="day4---matplotlib"><code>Day[4]</code> - Matplotlib 📈</h4>
<p>Now that we’ve learned how to import, manage, and analyze data using pandas, it’s time to make some graphs!</p>
</section>
<section id="morning-session-4" class="level4">
<h4 class="anchored" data-anchor-id="morning-session-4">Morning Session</h4>
<p>Matplotlib is the primary libary used for plotting data in Python (although there are some great alternatives), so we will start there.</p>
<p><a href="./exercises/Exercise2-3_Matplotlib.html">Session 4-1 - Matplotlib</a></p>
</section>
<section id="afternoon-session-4" class="level4">
<h4 class="anchored" data-anchor-id="afternoon-session-4">Afternoon Session</h4>
<p><a href="exercises/Exercise2-4_Seaborn.ipynb">Session 4-2 - Seaborn</a></p>
</section>
</section>
<section id="tuesday-september-12" class="level3">
<h3 class="anchored" data-anchor-id="tuesday-september-12">Tuesday, September 12</h3>
<section id="day5---scipy" class="level4">
<h4 class="anchored" data-anchor-id="day5---scipy"><code>Day[5]</code> - Scipy 📊</h4>
</section>
<section id="morning-session-5" class="level4">
<h4 class="anchored" data-anchor-id="morning-session-5">Morning Session</h4>
<p><a href="exercises/Exercise2-5_Scipy.ipynb">Session 5-1 - Scipy</a></p>
</section>
<section id="afternoon-session-5" class="level4">
<h4 class="anchored" data-anchor-id="afternoon-session-5">Afternoon Session</h4>
<p>TryPy 02</p>
</section>
</section>
<section id="wednesday-september-13---friday-september-15" class="level3">
<h3 class="anchored" data-anchor-id="wednesday-september-13---friday-september-15">Wednesday September 13 - Friday, September 15</h3>
<section id="day6---group-project-work" class="level4">
<h4 class="anchored" data-anchor-id="day6---group-project-work"><code>Day[6:]</code> - Group Project Work ✏️</h4>
<p>Our final activity will be a group project in which you work with a team of 3-4 of your classmates to create a brief tutorial introducting one of the many other libraries available to conduct environmental data science in Python.</p>
<p><a href="group_project/Python_Data_Science_Show_and_Tell.ipynb">Group Project</a></p>
<p>You will develop your tutorial using the same Jupyter Notebook structures that we’ve been using throughout the class and by incorporating examples using a dataset of your choosing.</p>
<p>The goal of this excercise is to collaboratively develop a set of data, notebooks, and visualizations that are entirely reproducible, shared on github, and used by others to learn how to use the library you’ve chosen.</p>
<p>On our last day (<code>Day[-1]</code>), we’ll spend the afternoon conducting a <a href="https://docs.google.com/document/d/1o_tdymZDOfTRjxFxHhT7yx2qcGuV72jttUgCOMKISxc/edit?usp=sharing"><strong>Python Data Science Show and Tell</strong></a></p>


</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>